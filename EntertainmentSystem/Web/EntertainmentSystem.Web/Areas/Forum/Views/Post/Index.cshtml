@using EntertainmentSystem.Web.Controllers.Users
@using EntertainmentSystem.Web.Areas.Forum.Controllers
@using EntertainmentSystem.Web.Areas.Forum.ViewModels
@model PostCommentsPageViewModel

<section id="es-form-posts">

    @using (Ajax.BeginForm("action", "controller", FormMethod.Post, new AjaxOptions() { }, new { hidden = "hidden", id = "hiddenAjaxPostForm" }))
    {
        @Html.AntiForgeryToken()
    }

    <div class="container">
        <h1 class="text-left">@Model.Post.Title</h1>
        <hr />
        <div class="es-forum-post-comments container">
            <div class="row" data-id="@Model.Post.Id">
                <div class="col-xs-2 forum-vote">
                    <div class="row well text-center forum-vote-well es-forum-model-vote">                        

                        @Html.Partial("_VotesPostPartial", @Model.Post)

                    </div>
                </div>
                <div class="col-xs-12 col-sm-10 forum-topic">
                    <div class="es-forum-post-content">
                        <div class="row es-forum-post-row-margin-zero">@Model.Post.Content</div>
                        <hr class="es-forum-hr-in">
                        <div class="row es-forum-post-row-margin-zero">
                            <p class="es-forum-post-info-color">
                                <span>posted</span>
                                <time class="es-forum-post-info-data-color">@Model.Post.CreatedOn</time>
                                at @(Html.ActionLink<CategoryController>(@Model.Post.Category.Name, c => c.Index(GlobalConstants.ForumStartPage, GlobalConstants.StringEmpty, @Model.Post.Category.Name), new { area = GlobalConstants.ForumAreaName }, new { @class = "es-forum-post-info-data-color" }))
                                from @(Html.ActionLink<UsersController>(@Model.Post.Author.UserName, c => c.Index(@Model.Post.Author.Id), null, new { @class = "es-forum-post-info-data-color" }))

                                @if (Request.IsAuthenticated)
                                {
                                    <a class="pull-right" data-ajax="true" data-ajax-method="Get" data-ajax-mode="replace" data-ajax-success="showAnswerForm(203549)" data-ajax-update="#answer-form-203549" href="/Forum/Ajax/AnswerPartial/203549?isAnswer=True">Comment</a>
                                }

                            </p>
                        </div>
                    </div>
                    <hr class="es-forum-hr-in">
                    <div class="row es-forum-post-row-margin-zero">
                        @foreach (var tag in Model.Post.Tags)
                        {
                            @(Html.ActionLink<TagController>(@tag.Name, c => c.Index(GlobalConstants.ForumStartPage, GlobalConstants.StringEmpty, @tag.Name), null, new { @class = "label label-default" }))
                        }
                    </div>
                </div>
            </div>

            <br>
            <h3>Comments</h3>
            <hr />

            <div id="es-forum-post-comments">
                
                @Html.Partial("_PostCommentsListPartial", @Model)

            </div>

        </div>
    </div>
</section>
